{% extends "base.html" %}

  {% block content %}
<h2 >{{stream_name}}</h2>
<table border="1" style="width:100%">
    <tr>
        {% for picture in pictures%}
            <td><img src="img?img_id={{picture.key()}}"></td>
        {% endfor%}
    </tr>
</table>
<form action="{{showmoreurl}}" method="get"><input type="submit" value="More Pictures"></form>
{% if (status == (1,1))%}

<form action="{{uploadurl}}" class="dropzone" id="my-dropzone" ></form>
<button id="submit-all">Upload</button>
<script>
Dropzone.options.myDropzone = {
    


    autoProcessQueue:false,

    
    init:function(){
      var submitButton = document.querySelector("#submit-all")

      myDropzone = this;

      submitButton.addEventListener("click",function(){
        myDropzone.processQueue();
      });


      this.on("addedfiles",function(){
        console.log("wenwen'file is added");

      })

      this.on("processing", function(file) {
          console.log("wenwen's file is processing 1");
      	$.getJSON('/uploadurlhandler', function(result){
            console.log(result);
            myDropzone.options.url = result;
            console.log("wenwen's file is processing");
        })
      });


     }


    
  };


  </script>
{% else %}
<form action="subscribe" method="post"><input type="submit" value="Subscribe"></form>
{%endif%}
{% endblock %}





